# 개발자 모드 가이드

## 개요

개발자 모드는 실제 네이버 계정 없이도 목 데이터로 서비스를 테스트할 수 있는 기능입니다.

## 주요 특징

1. **목 데이터 기반**: 실제 네이버 계정 없이도 테스트 가능
2. **자동 유저 생성**: DB에 없는 유저도 자동으로 생성
3. **누구나 접근 가능**: 개발자 모드가 활성화되면 누구나 접근 가능
4. **환경 변수로 제어**: `ENABLE_DEV_MODE` 환경 변수로 활성화/비활성화

## 활성화 방법

### 개발 환경 (기본 활성화)

개발 환경(`NODE_ENV=development`)에서는 기본적으로 활성화됩니다.

```env
NODE_ENV=development
# ENABLE_DEV_MODE 설정 불필요 (기본 활성화)
```

### 명시적 활성화

프로덕션 환경에서도 개발자 모드를 활성화하려면:

```env
ENABLE_DEV_MODE=true
```

### 비활성화

개발 환경에서 개발자 모드를 비활성화하려면:

```env
NODE_ENV=development
ENABLE_DEV_MODE=false
```

## 사용 방법

1. **개발자 모드 로그인 페이지 접속**
   ```
   http://localhost:3000/dev/login
   ```

2. **목 데이터 유저 선택**
   - 크리에이터: `creator_1`, `creator_2`, `creator_3`
   - 시청자: `viewer_1`, `viewer_2`, `viewer_3`

3. **자동 유저 생성**
   - 선택한 유저가 DB에 없으면 자동으로 생성됩니다
   - DB 연결이 실패해도 로컬 쿠키 모드로 작동합니다

## 목 데이터 유저 목록

### 크리에이터
- `creator_1` - 크리에이터1
- `creator_2` - 크리에이터2
- `creator_3` - 크리에이터3

### 시청자
- `viewer_1` - 시청자1
- `viewer_2` - 시청자2
- `viewer_3` - 시청자3

## 동작 방식

### 백엔드 (`/dev/login`)

1. **유저 조회/생성**
   - 기본 목록에 있는 유저인지 확인
   - DB에서 조회 시도
   - 없으면 자동 생성
   - DB 오류 시에도 목 데이터로 로그인 가능

2. **JWT 토큰 생성**
   - 실제 OAuth 없이 Mock JWT 생성
   - 쿠키에 세션 저장

### 프론트엔드 (`/dev/login`)

1. **백엔드 API 호출**
   - `/dev/login` 엔드포인트로 로그인 시도
   - 성공 시 쿠키 설정 및 온보딩 페이지로 이동

2. **폴백 모드**
   - 백엔드 연결 실패 시 로컬 쿠키 모드로 폴백
   - 개발 환경에서만 작동

## 보안 주의사항

1. **프로덕션 환경**
   - 프로덕션에서는 반드시 `ENABLE_DEV_MODE=false`로 설정
   - 또는 환경 변수를 설정하지 않으면 자동 비활성화

2. **데이터 분리**
   - 개발자 모드로 생성된 데이터는 실제 데이터와 분리되어야 함
   - 테스트 데이터 정리 필요

3. **접근 제한**
   - 개발자 모드는 목 데이터로 누구나 접근 가능
   - 실제 서비스와 혼동하지 않도록 주의

## 문제 해결

### 개발자 모드가 작동하지 않는 경우

1. **환경 변수 확인**
   ```env
   ENABLE_DEV_MODE=true
   ```

2. **백엔드 로그 확인**
   ```
   🚫 Dev mode access denied for user: ...
   ```
   → 개발자 모드가 비활성화되어 있음

3. **프론트엔드 확인**
   - 브라우저 콘솔에서 에러 확인
   - 네트워크 탭에서 `/dev/login` 요청 확인

### DB 연결 오류

- DB 연결이 실패해도 로컬 쿠키 모드로 작동합니다
- 일부 기능은 제한될 수 있습니다

## 관련 파일

- `backend/src/routes/dev.ts` - 개발자 모드 백엔드 라우트
- `web/app/dev/login/page.tsx` - 개발자 모드 로그인 페이지
- `backend/ENV_SETUP.md` - 환경 변수 설정 가이드
