# Mock 데이터 모드 수정 사항

## 수정된 문제

### 1. `/app` 대시보드가 보이지 않는 문제

**원인:**
- `/auth/me` API가 쿠키가 없을 때 기본값을 반환하지 않음
- 에러 발생 시 리다이렉트로 인해 페이지가 표시되지 않음

**수정:**
- 쿠키가 없어도 기본 유저 정보 반환
- Mock 모드에서는 에러를 무시하고 기본값 사용
- 로그인하지 않은 경우 개발 로그인 페이지로 안내

### 2. 역할 설정 실패 문제

**원인:**
- `/onboarding/role` POST 요청이 제대로 처리되지 않음
- 쿠키 업데이트가 실패할 수 있음
- 에러 처리가 부족함

**수정:**
- `js-cookie`를 사용하여 쿠키 읽기/쓰기 개선
- 에러 발생 시 기본값 반환
- 쿠키 업데이트를 API 핸들러와 컴포넌트 모두에서 처리

## 수정된 파일

1. `web/lib/api.ts`
   - `/auth/me`: 쿠키가 없어도 기본값 반환
   - `/onboarding/role`: 쿠키 업데이트 및 에러 처리 개선

2. `web/lib/mockData.ts`
   - `/onboarding/status`: `js-cookie` 사용
   - `/onboarding/role`: 쿠키 업데이트 및 에러 처리 개선

3. `web/app/app/page.tsx`
   - 에러 처리 개선 (Mock 모드에서 에러 무시)
   - 로그인 안내 추가

4. `web/app/onboarding/page.tsx`
   - 역할 설정 성공/실패 처리 개선
   - 쿠키 업데이트 보강

## 테스트 방법

1. 개발 서버 시작:
   ```powershell
   cd web
   npm run dev:mock
   ```

2. 개발 로그인:
   - http://localhost:3000/dev/login
   - 유저 선택 (예: `viewer_1`)

3. 온보딩:
   - 역할 선택 (시청자/크리에이터)
   - "계속하기" 클릭

4. 대시보드 확인:
   - `/app` 페이지가 정상적으로 표시되어야 함
   - 사용자 정보가 올바르게 표시되어야 함

## 확인 사항

- ✅ `/app` 대시보드가 정상적으로 표시됨
- ✅ 역할 설정이 성공적으로 완료됨
- ✅ 쿠키가 올바르게 설정되고 읽힘
- ✅ 온보딩 플로우가 정상 작동
